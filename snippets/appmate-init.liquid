{{ 'https://az814789.vo.msecnd.net/toolkit/1.1.0/appmate.js' | script_tag }}
{{ 'appmate-wishlist.scss.css' | asset_url | stylesheet_tag }}

<script type="text/javascript">
    ;(function(){
        if (typeof Appmate === 'undefined') return; // In case lib didn't load.

        Appmate.init({
            shop: {
                domain: '{{ shop.domain }}'
            },

            session: {
              customer: '{{ customer.id }}'
            },

            globals: {
                settings: {{ settings | json }}
            }
        });

        Appmate.wk.on({
            'click .wk-button-add': function(event){
                var product = this.getAttribute('data-wk-product');
                var variant = $(this).parents('form').find('select[name="id"]').val();
                Appmate.wk.addProduct(product, variant);
            },
            'click .wk-button-remove': function(event){
                var item = this.getAttribute('data-wk-item');
                var product = this.getAttribute('data-wk-product');
                if (item) {
                    Appmate.wk.removeItem(item);
                }
                else if (product) {
                    Appmate.wk.removeProduct(product);
                }

            },
            'click .wk-clear-button': function(event){
                Appmate.wk.clear();
            },
            'render .wk-option-select': function(elem){
                appmateOptionSelect(elem);
            },
            'render .wk-add-to-cart': function(elem){
                // appmateAddToCart(elem);
            }
        });

    })();

</script>

{% include 'appmate-markup' %}
